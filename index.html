<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>6AD Assembly Access</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
      transition: background-color 0.5s;
    }
    h2 {
      color: #333;
    }
    .section {
      margin-bottom: 30px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .password-container {
      margin-top: 10px;
    }
    #logoutBtn {
      display: none;
      position: fixed;
      top: 10px;
      right: 10px;
      background: #d9534f;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      z-index: 1000;
    }
    .remember-container {
      margin-top: 8px;
      display: flex;
      align-items: center;
    }
    .remember-container label {
      margin-left: 5px;
      font-size: 15px;
      color: #333;
    }
    #settingsBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      z-index: 999;
    }
    #settingsModal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #fff;
      border: none;
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      z-index: 1000;
      animation: fadeIn 0.2s;
      max-width: 100vw;
      max-height: 100vh;
      overflow: hidden;
    }
    #settingsGrid {
      display: flex;
      flex-direction: column; /* Change to column for vertical scroll */
      flex-wrap: nowrap;
      overflow-y: auto;      /* Enable vertical scroll */
      overflow-x: hidden;    /* Disable horizontal scroll */
      height: 80vh;
      max-height: 80vh;
      width: 340px;
      padding: 24px 24px 16px 24px;
      overscroll-behavior-y: contain;
      overscroll-behavior-x: none;
    }
    #settingsGrid::-webkit-scrollbar {
      width: 16px;
      height: 0;
      background: #eee;
    }
    #settingsGrid::-webkit-scrollbar-thumb {
      background: #bbb;
      border-radius: 8px;
    }
    .settingsColumn {
      display: flex;
      flex-direction: column;
      margin-right: 0;
      margin-bottom: 0;
    }
    .setting-row {
      min-width: 260px;
      max-width: 320px;
      margin-bottom: 12px;
    }
    #settingsModal {
      width: 370px;
      max-width: 95vw;
      left: auto;
      right: 0;
      border-radius: 0 0 0 12px;
      box-shadow: -4px 0 24px rgba(0,0,0,0.13);
      animation: fadeIn 0.2s;
    }
    #closeSettingsBtn {
      right: 18px;
      left: auto;
    }
    .bouncy {
      animation: bounce 0.4s;
    }
    @keyframes bounce {
      0% { transform: translateY(0);}
      40% { transform: translateY(-8px);}
      80% { transform: translateY(0);}
    }
    .confetti {
      position: fixed;
      pointer-events: none;
      z-index: 2000;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      opacity: 0.7;
      animation: confetti-fall 1s linear forwards;
    }
    @keyframes confetti-fall {
      to {
        transform: translateY(80vh) rotate(360deg);
        opacity: 0.2;
      }
    }
    #motivationQuote {
      display: none;
      background: #fffae3;
      color: #a67c00;
      border-left: 5px solid #ffe066;
      padding: 12px 18px;
      margin-bottom: 18px;
      font-size: 16px;
      font-style: italic;
      border-radius: 8px;
    }
    .disco-transition {
      transition: background-color 0.2s;
    }
    .emojiRain {
      position: fixed;
      z-index: 1100;
      pointer-events: none;
      font-size: 2rem;
      animation: emoji-fall 1.3s linear forwards;
    }
    @keyframes emoji-fall {
      from {opacity:1;}
      to {transform: translateY(80vh) rotate(360deg); opacity:0;}
    }
    .memePopup {
      position: fixed;
      z-index: 1200;
      pointer-events: none;
      animation: meme-show 2.2s linear forwards;
      max-width: 200px;
      max-height: 150px;
      opacity: 0.9;
    }
    @keyframes meme-show {
      from {opacity:0;}
      10% {opacity:1;}
      90% {opacity:1;}
      to {opacity:0;}
    }
    #laserPointer {
      display:none;
      position:fixed;
      z-index:2000;
      width:14px;
      height:14px;
      background:radial-gradient(circle at 7px 7px, #ff3, #f00 70%, transparent 100%);
      border-radius:50%;
      pointer-events:none;
      mix-blend-mode: screen;
    }
    #lowBatteryBanner {
      display:none;
      position:fixed;
      top:0;
      left:0;
      width:100vw;
      background:#e74c3c;
      color:#fff;
      text-align:center;
      font-size:18px;
      font-weight:bold;
      padding:10px;
      z-index:2001;
      letter-spacing:1px;
      font-family:monospace;
    }
    #fakeVirusModal {
      display:none;
      position:fixed;
      top:30%;
      left:50%;
      transform:translate(-50%, -30%);
      background:#fff;
      border:3px solid #e74c3c;
      border-radius:16px;
      box-shadow:0 8px 32px rgba(0,0,0,0.4);
      padding:38px 28px 18px 28px;
      z-index:2100;
      width:330px;
      max-width:90vw;
      text-align:center;
      font-size:19px;
      color:#c0392b;
      font-family:monospace;
    }
    #fakeVirusModal button {
      margin-top:24px;
      font-size:18px;
      background:#27ae60;
      color:#fff;
      border:none;
      border-radius:7px;
      padding:8px 22px;
      cursor:pointer;
    }
    .censored {
      filter: blur(4px) brightness(0.8);
      transition: filter 0.3s;
    }
    .typewriter-text {
      visibility: hidden;
    }
    .typewriter-cursor {
      display: inline-block;
      width: 2px;
      background: #333;
      animation: blink 0.7s infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
    .mirrored {
      direction: rtl;
      unicode-bidi: bidi-override;
      font-family: monospace;
    }
    #dramaticAudio {display:none;}
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px);}
      to { opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body>
  <div id="motivationQuote"></div>
  <div id="lowBatteryBanner">Low Battery! Please plug in your device!</div>
  <div id="fakeVirusModal">
    <div>‚ö†Ô∏è VIRUS DETECTED!<br><br>Your device is infected!<br><br><span style="color:#333;font-size:16px;">Just kidding!</span></div>
    <button onclick="document.getElementById('fakeVirusModal').style.display='none'">Phew!</button>
  </div>
  <div id="laserPointer"></div>
  <button id="logoutBtn" onclick="logout()">Log Out</button>
  <div class="section">
    <h2 id="viewOnlyTitle">View Only</h2>
    <button onclick="window.location.href='https://tinyurl.com/6ADassembly'">Script</button>
    <button onclick="window.location.href='https://tinyurl.com/6ADassemblypresentation'">Presentation</button>
    <button onclick="window.location.href='https://www.youtube.com/watch?v=dqpkWsR6Yew'">Harvest Samber</button>
  </div>
  <div class="section">
    <h2 id="editableTitle">Editable (only for Jack G)</h2>
    <div>
      <button onclick="showPasswordPrompt('https://tinyurl.com/6ADjackg1')">Script</button>
      <button onclick="showPasswordPrompt('https://tinyurl.com/6ADjackg2')">Presentation</button>
    </div>
    <div class="password-container" id="passwordPrompt" style="display:none;">
      <input type="password" id="passwordInput" placeholder="Enter password">
      <div class="remember-container">
        <input type="checkbox" id="rememberMe">
        <label for="rememberMe">Remember Me</label>
      </div>
      <button onclick="checkPassword()" id="goBtn">Go</button>
    </div>
  </div>
  <!-- Settings Button & Modal -->
  <button id="settingsBtn" title="Funny Settings">‚öôÔ∏è</button>
  <div id="settingsModal">
    <h3>Funny Settings</h3>
    <div id="settingsGrid"></div>
    <button id="closeSettingsBtn">Close</button>
  </div>
  <audio id="applauseAudio" src="https://cdn.jsdelivr.net/gh/peachananr/applause@main/applause.mp3" preload="auto"></audio>
  <audio id="dramaticAudio" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b78a2e2.mp3" loop preload="auto"></audio>
  <audio id="clownHornAudio" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b78a2e2.mp3" preload="auto"></audio>
  <audio id="poopFartAudio" src="https://cdn.jsdelivr.net/gh/stevenliuyi/audio-samples@main/fart.mp3" preload="auto"></audio>

  <script>
    // --- Funny Settings ---
    const funnySettings = [
      'comicSansify','discoMode','bouncyButtons','applause','pirateMode','confetti','motivationalQuotes','upsideDownMode',
      'typewriter','censored','raveMode','dramatic','emojiRain','meme','rickroll','mirror','laser','clownHorn',
      'surprisePopup','lowBattery','shakespeare','poopMode','fakeVirus',
      // 30 more settings below
      'rainbowText','invertColors','giantCursor','tinyText','randomFont','blurMode','sepiaMode','snow','fireworks','catMode',
      'dogMode','matrix','vaporwave','nyanCat','bananaMode','frogMode','beeMode','alienMode','ghostMode','skeletonMode',
      'pumpkinMode','unicornMode','sharkMode','pizzaMode','burgerMode','donutMode','popcornMode','tacoMode','waffleMode','eggMode',
      // 30 new settings from the ideas list
      'rainbowBorders','upsideDownImages','pixelateMode','monochromeMode','synthwaveMode','jitterMode','bigEmojiCursor','randomSounds',
      'invisibleButtons','dizzyMode','bubblePop','stickyNotes','dancingAnimals','confusedText','fakeBlueScreen','rain404','partyHatMode',
      'morseCodeMode','oldTvMode','popcornPopping','randomFontSize','invisibleWalls','ghostCursor','slowMotion','speedUp','fakeUpdate',
      'duckHunt','matrixCode','bubbleWrap','randomColorScheme'
    ];
    // Poop Mode emoji and image assets
    const poopEmojis = ["üí©","ü¶®","ü™†","üßª","üöΩ","ü§¢","ü§Æ"];
    const poopImages = [
      "https://media.giphy.com/media/3o6Zt8zb1Pp2v3A2l6/giphy.gif",
      "https://media.giphy.com/media/3o7TKtnuHOHHUjR38Y/giphy.gif",
      "https://i.imgur.com/1Q9Z1ZB.png"
    ];
    let poopModeInterval = null;
    // Motivational quotes
    const motivationalQuotes = [
      "Believe you can and you're halfway there.",
      "You are braver than you believe, stronger than you seem, and smarter than you think.",
      "Keep going. Everything you need will come to you.",
      "Success is not for the lazy!",
      "If you think you can, you can.",
      "The best way to get started is to quit talking and begin doing.",
      "Don't watch the clock; do what it does. Keep going.",
      "Dream big and dare to fail."
    ];
    // Shakespearean phrases
    const shakespearePhrases = {
      "Log Out":"Depart hence!",
      "Go":"Proceed!",
      "Editable (only for Jack G)":"Editable (for Lord Jack G)",
      "View Only":"View Only (Forsooth!)"
    };
    // Surprise facts
    const surpriseFacts = [
      "Did you know: chickens can't taste spicy food!",
      "Fact: The inventor of the frisbee was turned into a frisbee after he died.",
      "Random: Cats have fewer toes on their back paws.",
      "Surprise: The shortest war in history lasted 38 minutes.",
      "Fun: A group of flamingos is called a 'flamboyance'."
    ];
    // Meme images
    const memeImages = [
      "https://media.giphy.com/media/Vuw9m5wXviFIQ/giphy.gif",
      "https://media.giphy.com/media/3o6ZtaO9BZHcOjmErm/giphy.gif",
      "https://i.imgflip.com/30b1gx.jpg",
      "https://i.kym-cdn.com/entries/icons/facebook/000/000/774/yeah.jpg",
      "https://media.giphy.com/media/l41lI4bYmcsPJX9Go/giphy.gif"
    ];
    // Emojis
    const emojiList = ["üòÇ","ü•≥","üéâ","ü§°","üëæ","üêî","üçï","üèÜ","üî•","üöÄ","ü§ñ","üêô","ü¶Ñ"];
    let discoInterval, raveInterval, memeInterval, surpriseInterval, emojiInterval, typewriterTimeout;
    let laserPointerActive = false;
    let rickrollTimer = null;
    // --- Settings Modal ---
    document.getElementById('settingsBtn').onclick = () => document.getElementById('settingsModal').style.display = 'block';
    document.getElementById('closeSettingsBtn').onclick = () => document.getElementById('settingsModal').style.display = 'none';
    window.onclick = (e) => {
      if (e.target === document.getElementById('settingsModal')) document.getElementById('settingsModal').style.display = 'none';
    };

    // --- Load & Apply on Load ---
    window.onload = function() {
      if (localStorage.getItem('rememberMeJackG')) document.getElementById('logoutBtn').style.display = 'block';
      // Always default poopMode to off
      localStorage.removeItem('poopMode');
      funnySettings.forEach((setting) => {
        // Poop Mode always unchecked on load
        const checked = (setting === 'poopMode') ? false : (localStorage.getItem(setting) === 'true');
        const toggle = document.getElementById(setting + 'Toggle');
        if (toggle) toggle.checked = checked;
        applySetting(setting, checked);
      });
      if (localStorage.getItem('motivationalQuotes') === 'true') showMotivationalQuote();
      if(localStorage.getItem('laser') === 'true') enableLaserPointer(true);
    };

    // --- Motivational Quote ---
    function showMotivationalQuote() {
      const quoteBox = document.getElementById('motivationQuote');
      quoteBox.textContent = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
      quoteBox.style.display = 'block';
    }
    function hideMotivationalQuote() {
      document.getElementById('motivationQuote').style.display = 'none';
    }
    // --- Settings Handlers ---
    // --- Settings Handlers ---
    // Add 30 more settings to JS array
    [
      'rainbowText','invertColors','giantCursor','tinyText','randomFont','blurMode','sepiaMode','snow','fireworks','catMode','dogMode','matrix','vaporwave','nyanCat','bananaMode','frogMode','beeMode','alienMode','ghostMode','skeletonMode','pumpkinMode','unicornMode','sharkMode','pizzaMode','burgerMode','donutMode','popcornMode','tacoMode','waffleMode','eggMode','baconMode','cheeseMode','broccoliMode','potatoMode',
      // 30 more
      'hotdogMode','iceCreamMode','cookieMode','carrotMode','lettuceMode','grapeMode','appleMode','pearMode','peachMode','cherryMode',
      'lemonMode','limeMode','orangeMode','watermelonMode','kiwiMode','pineappleMode','coconutMode','avocadoMode','onionMode','garlicMode',
      'mushroomMode','cornMode','pumpkinSpiceMode','gingerbreadMode','candyCaneMode','sundaeMode','bubbleTeaMode','ramenMode','sushiMode','bobaMode'
    ].forEach(s => { if (!funnySettings.includes(s)) funnySettings.push(s); });

    // Dynamically render settings in a single column for vertical scroll
    function renderSettingsGrid() {
      const grid = document.getElementById('settingsGrid');
      grid.innerHTML = '';
      funnySettings.forEach((setting) => {
        const row = document.createElement('div');
        row.className = 'setting-row';
        const input = document.createElement('input');
        input.type = 'checkbox';
        input.id = setting + 'Toggle';
        const label = document.createElement('label');
        label.htmlFor = input.id;
        // Prettify label
        label.textContent = setting.replace(/([A-Z])/g, ' $1').replace(/^./, c => c.toUpperCase()).replace('Toggle','').replace('Mode',' Mode');
        row.appendChild(input);
        row.appendChild(label);
        grid.appendChild(row);
      });
    }
    renderSettingsGrid();

    // Attach handlers
    funnySettings.forEach((setting) => {
      const toggle = document.getElementById(setting + 'Toggle');
      if (!toggle) return;
      toggle.onchange = function(e) {
        localStorage.setItem(setting, e.target.checked ? 'true' : 'false');
        applySetting(setting, e.target.checked);
      };
    });

    // On open, re-render and restore checked states
    document.getElementById('settingsBtn').onclick = () => {
      renderSettingsGrid();
      funnySettings.forEach((setting) => {
        const checked = localStorage.getItem(setting) === 'true';
        const toggle = document.getElementById(setting + 'Toggle');
        if (toggle) toggle.checked = checked;
      });
      document.getElementById('settingsModal').style.display = 'block';
    };

    // --- Setting Effects ---
  function applySetting(setting, enabled) {
      // --- Poop Mode ---
      if (setting === 'poopMode') {
        if (enabled) {
          document.body.style.backgroundImage = "url('https://i.imgur.com/1Q9Z1ZB.png')";
          poopModeInterval = setInterval(() => {
            poopRain();
            if (Math.random() < 0.4) poopFart();
          }, 1200);
        } else {
          document.body.style.backgroundImage = '';
          clearInterval(poopModeInterval);
          Array.from(document.querySelectorAll('.poopRain,.poopPopup')).forEach(el => el.remove());
        }
      }
    // Poop rain effect
    function poopRain() {
      const emoji = poopEmojis[Math.floor(Math.random()*poopEmojis.length)];
      const div = document.createElement('div');
      div.className = 'poopRain';
      div.textContent = emoji;
      div.style.position = 'fixed';
      div.style.left = (Math.random()*95)+'vw';
      div.style.top = '0vh';
      div.style.fontSize = (2+Math.random()*2)+'rem';
      div.style.zIndex = 1300;
      div.style.pointerEvents = 'none';
      div.style.animation = 'poop-fall 1.7s linear forwards';
      document.body.appendChild(div);
      setTimeout(()=>div.remove(),1700);
    }
    // Poop fart sound and popup
    function poopFart() {
      const audio = document.getElementById('poopFartAudio');
      audio.currentTime = 0;
      audio.play();
      // Random poop image popup
      const img = document.createElement('img');
      img.src = poopImages[Math.floor(Math.random()*poopImages.length)];
      img.className = 'poopPopup';
      img.style.position = 'fixed';
      img.style.left = (Math.random()*80)+'vw';
      img.style.top = (10+Math.random()*70)+'vh';
      img.style.maxWidth = '120px';
      img.style.maxHeight = '90px';
      img.style.zIndex = 1400;
      img.style.opacity = 0.92;
      img.style.pointerEvents = 'none';
      img.style.animation = 'poop-popup 1.5s linear forwards';
      document.body.appendChild(img);
      setTimeout(()=>img.remove(),1500);
    }
    // Poop Mode CSS
    const poopStyle = document.createElement('style');
    poopStyle.innerHTML = `
      @keyframes poop-fall {
        from { opacity:1; }
        to { transform: translateY(80vh) rotate(360deg); opacity:0; }
      }
      .poopRain {
        animation: poop-fall 1.7s linear forwards;
      }
      @keyframes poop-popup {
        from { opacity:0; }
        10% { opacity:1; }
        90% { opacity:1; }
        to { opacity:0; }
      }
      .poopPopup {
        animation: poop-popup 1.5s linear forwards;
      }
    `;
    document.head.appendChild(poopStyle);
      switch (setting) {
        case 'comicSansify':
          document.body.style.fontFamily = enabled ? "'Comic Sans MS', 'Comic Sans', cursive, sans-serif" : '';
          break;
        case 'discoMode':
          if (enabled) {
            document.body.classList.add('disco-transition');
            discoInterval = setInterval(() => {
              document.body.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
            }, 400);
          } else {
            clearInterval(discoInterval);
            document.body.style.backgroundColor = '#f4f4f4';
            document.body.classList.remove('disco-transition');
          }
          break;
        case 'bouncyButtons':
          document.querySelectorAll('button').forEach(btn => {
            if (enabled) {
              btn.onmouseenter = () => btn.classList.add('bouncy');
              btn.onanimationend = () => btn.classList.remove('bouncy');
            } else {
              btn.onmouseenter = null;
              btn.onanimationend = null;
              btn.classList.remove('bouncy');
            }
          });
          break;
        case 'applause':
          break;
        case 'pirateMode':
          document.getElementById('viewOnlyTitle').textContent = enabled ? "View Only (Arrr!)" : "View Only";
          document.getElementById('editableTitle').textContent = enabled ? "Editable (for Captain Jack G)" : "Editable (only for Jack G)";
          document.getElementById('logoutBtn').textContent = enabled ? "Abandon Ship" : "Log Out";
          document.getElementById('goBtn').textContent = enabled ? "Set Sail" : "Go";
          document.getElementById('settingsBtn').title = enabled ? "Funny Pirate Settings" : "Funny Settings";
          break;
        case 'confetti':
          break;
        case 'motivationalQuotes':
          if (enabled) showMotivationalQuote(); else hideMotivationalQuote();
          break;
        case 'upsideDownMode':
          document.body.style.transform = enabled ? 'rotate(180deg)' : '';
          break;
        case 'typewriter':
          if (enabled) typewriterEffect(); else removeTypewriter();
          break;
        case 'censored':
          document.querySelectorAll('h2,.section').forEach(el => {
            if (enabled) el.classList.add('censored');
            else el.classList.remove('censored');
          });
          break;
        case 'raveMode':
          if (enabled) {
            raveInterval = setInterval(() => {
              document.body.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
              document.body.style.fontSize = (16 + Math.floor(Math.random()*20)) + 'px';
              document.querySelectorAll('button').forEach(btn => {
                btn.style.transform = `translateY(${Math.random()*20-10}px) scale(${1+Math.random()*0.2})`;
              });
            }, 100);
          } else {
            clearInterval(raveInterval);
            document.body.style.backgroundColor = '#f4f4f4';
            document.body.style.fontSize = '';
            document.querySelectorAll('button').forEach(btn => btn.style.transform = '');
          }
          break;
        case 'dramatic':
          const dramaticAudio = document.getElementById('dramaticAudio');
          if (enabled) {dramaticAudio.play();} else {dramaticAudio.pause();dramaticAudio.currentTime=0;}
          break;
        case 'emojiRain':
          if (enabled) emojiInterval = setInterval(() => emojiRain(), 500);
          else clearInterval(emojiInterval);
          break;
        case 'meme':
          if (enabled) memeInterval = setInterval(() => showMeme(), 3200);
          else clearInterval(memeInterval);
          break;
        case 'rickroll':
          if (enabled) startRickrollTimer();
          else clearRickrollTimer();
          break;
        case 'mirror':
          if (enabled) document.body.classList.add('mirrored');
          else document.body.classList.remove('mirrored');
          break;
        case 'laser':
          enableLaserPointer(enabled);
          break;
        case 'clownHorn':
          break;
        case 'surprisePopup':
          if (enabled) surpriseInterval = setInterval(() => showSurprisePopup(), 6000);
          else clearInterval(surpriseInterval);
          break;
        case 'lowBattery':
          document.getElementById('lowBatteryBanner').style.display = enabled ? 'block' : 'none';
          break;
        case 'shakespeare':
          if (enabled) {
            document.getElementById('logoutBtn').textContent = "Depart hence!";
            document.getElementById('goBtn').textContent = "Proceed!";
            document.getElementById('editableTitle').textContent = "Editable (for Lord Jack G)";
            document.getElementById('viewOnlyTitle').textContent = "View Only (Forsooth!)";
          } else {
            patchPirateModeDynamic();
          }
          break;
        case 'fakeVirus':
          if (enabled) setTimeout(()=>{document.getElementById('fakeVirusModal').style.display='block';},1200);
          else document.getElementById('fakeVirusModal').style.display='none';
          break;
      }
    }
    function throwConfetti(x, y) {
      for (let i = 0; i < 18; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = (x + Math.random()*40 - 20) + 'px';
        confetti.style.top = (y + Math.random()*40 - 20) + 'px';
        confetti.style.backgroundColor = '#' + Math.floor(Math.random()*16777215).toString(16);
        confetti.style.animationDuration = (0.8 + Math.random() * 0.5) + 's';
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 1500);
      }
    }
    function playClownHorn() {
      document.getElementById('clownHornAudio').currentTime=0;
      document.getElementById('clownHornAudio').play();
    }
    document.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', function(e) {
        if (localStorage.getItem('confetti') === 'true') {
          const rect = btn.getBoundingClientRect();
          throwConfetti(rect.left + rect.width/2, rect.top + rect.height/2);
        }
        if (localStorage.getItem('clownHorn') === 'true') {
          playClownHorn();
        }
      });
    });
    function patchPirateModeDynamic() {
      if (localStorage.getItem('pirateMode') === 'true') {
        document.getElementById('viewOnlyTitle').textContent = "View Only (Arrr!)";
        document.getElementById('editableTitle').textContent = "Editable (for Captain Jack G)";
        document.getElementById('logoutBtn').textContent = "Abandon Ship";
        document.getElementById('goBtn').textContent = "Set Sail";
        document.getElementById('settingsBtn').title = "Funny Pirate Settings";
      } else {
        document.getElementById('viewOnlyTitle').textContent = "View Only";
        document.getElementById('editableTitle').textContent = "Editable (only for Jack G)";
        document.getElementById('logoutBtn').textContent = "Log Out";
        document.getElementById('goBtn').textContent = "Go";
        document.getElementById('settingsBtn').title = "Funny Settings";
      }
    }
    document.getElementById('settingsBtn').addEventListener('click', patchPirateModeDynamic);

    let targetUrl = "";
    function showPasswordPrompt(url) {
      targetUrl = url;
      if (localStorage.getItem('rememberMeJackG')) {
        window.location.href = targetUrl;
        return;
      }
      document.getElementById('passwordPrompt').style.display = 'block';
      document.getElementById('passwordInput').value = '';
      document.getElementById('rememberMe').checked = false;
    }
    function checkPassword() {
      const password = document.getElementById('passwordInput').value;
      const rememberMeChecked = document.getElementById('rememberMe').checked;
      if (password === "woman123") {
        if (rememberMeChecked) {
          localStorage.setItem('rememberMeJackG', 'true');
          document.getElementById('logoutBtn').style.display = 'block';
        }
        if (localStorage.getItem('applause') === 'true') {
          const applauseAudio = document.getElementById('applauseAudio');
          applauseAudio.currentTime = 0;
          applauseAudio.play();
        }
        window.location.href = targetUrl;
      }
    }
    function logout() {
      localStorage.removeItem('rememberMeJackG');
      document.getElementById('logoutBtn').style.display = 'none';
      document.getElementById('passwordPrompt').style.display = 'none';
      document.getElementById('passwordInput').value = '';
      document.getElementById('rememberMe').checked = false;
      alert(localStorage.getItem('pirateMode') === 'true' ?
        "Ye have been logged out, matey. Remember Me be off!" :
        "You have been logged out. Remember Me is now off.");
    }
    function emojiRain() {
      const emoji = emojiList[Math.floor(Math.random()*emojiList.length)];
      const div = document.createElement('div');
      div.className = 'emojiRain';
      div.textContent = emoji;
      div.style.left = (Math.random()*95)+'vw';
      div.style.top = '0vh';
      document.body.appendChild(div);
      setTimeout(()=>div.remove(),1500);
    }
    function showMeme() {
      const img = document.createElement('img');
      img.src = memeImages[Math.floor(Math.random()*memeImages.length)];
      img.className = 'memePopup';
      img.style.left = (Math.random()*80)+'vw';
      img.style.top = (10+Math.random()*70)+'vh';
      document.body.appendChild(img);
      setTimeout(()=>img.remove(),2200);
    }
    function showSurprisePopup() {
      alert(surpriseFacts[Math.floor(Math.random()*surpriseFacts.length)]);
    }
    function startRickrollTimer() {
      if (rickrollTimer) return;
      rickrollTimer = setTimeout(() => {
        window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
      }, 18000 + Math.random()*8000);
    }
    function clearRickrollTimer() {
      if (rickrollTimer) clearTimeout(rickrollTimer);
      rickrollTimer = null;
    }
    function enableLaserPointer(enabled) {
      const laser = document.getElementById('laserPointer');
      laserPointerActive = !!enabled;
      laser.style.display = enabled ? 'block':'none';
      if (enabled) {
        document.addEventListener('mousemove', laserMove);
      } else {
        document.removeEventListener('mousemove', laserMove);
      }
    }
    function laserMove(e) {
      const laser = document.getElementById('laserPointer');
      laser.style.left = (e.pageX-7)+'px';
      laser.style.top = (e.pageY-7)+'px';
    }
    function typewriterEffect() {
      const all = Array.from(document.querySelectorAll('h2,.section'));
      all.forEach(el => {
        if (!el.dataset.originalText) el.dataset.originalText = el.textContent;
        el.textContent = "";
        el.classList.add('typewriter-text');
      });
      let i=0;
      function typeNext() {
        if (i>=all.length) return;
        const el = all[i];
        el.style.visibility = 'visible';
        let txt = el.dataset.originalText;
        let idx=0;
        function typeLetter(){
          if(idx<=txt.length){
            el.textContent = txt.substr(0,idx) + (idx<txt.length?"|":"");
            idx++;
            setTimeout(typeLetter, 26);
          } else {
            el.textContent = txt;
            el.classList.remove('typewriter-text');
            i++;
            setTimeout(typeNext, 150);
          }
        }
        typeLetter();
      }
      typeNext();
    }
    function removeTypewriter() {
      Array.from(document.querySelectorAll('h2,.section')).forEach(el => {
        if (el.dataset.originalText) el.textContent = el.dataset.originalText;
        el.classList.remove('typewriter-text');
      });
    }
    // Ghost cursor move handler
    function ghostCursorMove(e) {
      if (window.ghostCursor) {
        window.ghostCursor.style.left = (e.pageX + 24) + 'px';
        window.ghostCursor.style.top = (e.pageY + 24) + 'px';
      }
    }
  </script>
</body>
</html>
